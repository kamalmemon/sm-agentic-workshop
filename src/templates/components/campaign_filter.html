<div class="bg-white rounded-xl shadow-md p-5 border-t-4 border-finnish-blue">
    <label for="campaign-select" class="block text-sm font-semibold text-finnish-blue mb-3 uppercase tracking-wider">
        Valitse Kampanja
    </label>
    <select id="campaign-select" name="campaign_id"
        class="block w-full md:w-72 rounded-lg border-2 border-finnish-ice shadow-sm focus:border-finnish-blue focus:ring-finnish-blue py-3 px-4 text-finnish-blue font-medium bg-finnish-snow"
        hx-get="/metrics/all" hx-target="#metrics-section" hx-swap="innerHTML"
        hx-trigger="change" hx-include="this"
        onchange="htmx.trigger(document.body, 'campaignChanged', {campaign_id: this.value})">
        <option value="">All Campaigns</option>
        {% for campaign in campaigns %}
        <option value="{{ campaign.id }}" {% if campaign.id == selected_id %}selected{% endif %}>
            {{ campaign.name }} ({{ campaign.status }})
        </option>
        {% endfor %}
    </select>
</div>
<script>
document.body.addEventListener('htmx:configRequest', function(evt) {
    const select = document.getElementById('campaign-select');
    if (select && select.value && !evt.detail.path.includes('campaign_id')) {
        evt.detail.parameters['campaign_id'] = select.value;
    }
});
</script>
